(this["webpackJsonpinstant-widgets-editor"]=this["webpackJsonpinstant-widgets-editor"]||[]).push([[0],{139:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n={AT:["de"],BY:["be","ru"],CH:["de","en","fr","it"],GB:["en"],IE:["en"],NL:["nl"]},i=function(){var e=JSON.parse(localStorage.getItem("instant-widgets-current-repo"))[0].name.split("capp-instantWidgets-")[1];return n[e.toUpperCase()]}},143:function(e,t,a){"use strict";(function(e){var n=a(131),i=a(132),r=a(133),o=a(270),s=a(273),l=a(0),c=a.n(l),u=(a(509),a(60)),m=a.n(u),d=a(144),p=a(145),g=a(528),f=a(28),h=a(184),v=a(87),b=a.n(v),E=a(268),w=a(182),y=a(269),O=a(522),S=function(t){Object(s.a)(l,t);var a=Object(o.a)(l);function l(e){var t;return Object(n.a)(this,l),(t=a.call(this,e)).state={arrayOfItems:[],isSortable:!1,isChanged:!1},t.creds=localStorage.getItem("instant-widgets-creds"),t.user=t.creds.split(":")[0],t.token=t.creds.split(":")[1],t.repoName=JSON.parse(localStorage.getItem("instant-widgets-current-repo"))[0].name,t.sha="",t.requester=new E.a({env:e.env,user:t.user,token:t.token,repoName:t.repoName}),window.carousels||(window.carousels=new Map),window.carousels.set(e.env.toLowerCase(),Object(r.a)(t)),t}return Object(i.a)(l,[{key:"componentDidMount",value:function(){var e=this,t=this,a={url:"https://api.github.com/repos/LibertyGlobal/".concat(this.repoName,"/contents/").concat(this.props.env.toUpperCase(),".json"),auth:{user:this.user,pass:this.token}};m()(a,(function(e,a,i){if(e||200!==a.statusCode)console.error("ERROR");else{var r=JSON.parse(i),o=r.download_url;t.sha=r.sha,n(o)}}));var n=function(e){var a={url:e};m()(a,(function(e,a,n){if(e||200!==a.statusCode)console.error("ERROR");else{var i=JSON.parse(n);t.drawItems(i)}}))};window.setInterval((function(){var a=localStorage.getItem("instant-widgets-storage-"+t.props.env+"-old")!==localStorage.getItem("instant-widgets-storage-"+t.props.env+"-new");e.setState({arrayOfItems:e.state.arrayOfItems,isSortable:e.state.isSortable,isChanged:a})}),1e3)}},{key:"drawItems",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],i=[],r=this,o=function(){localStorage.setItem("instant-widgets-storage-"+r.props.env+"-new",JSON.stringify(i)),a||localStorage.setItem("instant-widgets-storage-"+r.props.env+"-old",JSON.stringify(i)),i.forEach((function(e){n.push(c.a.createElement(h.a,{key:b.a.generate(),data:e,env:r.props.env,id:e.iw_id}))})),r.setState({arrayOfItems:n,isSortable:r.state.isSortable,isChanged:r.state.isChanged})},s=function(t){i.push(t),i.length===e.length&&(i=i.sort((function(e,t){return Number(e.iw_index)>Number(t.iw_index)?1:Number(t.iw_index)>Number(e.iw_index)?-1:0})),o())};e.forEach((function(e,a){if(e.iw_id=b.a.generate(),e.iw_index||(e.iw_index=a),e.imageUrl||(e.iw_fullImg=""),e.imageUrl&&void 0===e.iw_fullImg){var n={url:"https://api.github.com/repos/LibertyGlobal/".concat(t.repoName,"/contents/images/").concat(t.props.env.toUpperCase(),"/").concat(e.imageUrl),auth:{user:t.user,pass:t.token}};m()(n,(function(t,a,n){if(t||200!==a.statusCode)console.error("ERROR"),e.iw_fullImg="",s(e);else{var i=JSON.parse(n).download_url;e.iw_fullImg=i,s(e)}}))}else s(e)}))}},{key:"sendImage",value:function(e,t){var a='{"message": "Upload image", "content": "'+t+'" }',n={url:"https://api.github.com/repos/LibertyGlobal/".concat(this.repoName,"/contents/images/").concat(this.props.env.toUpperCase(),"/").concat(e),method:"PUT",body:a,auth:{user:this.user,pass:this.token}};this.requester.addToQueue(n,(function(e,t,a){console.log(JSON.parse(a)),e||200!==t.statusCode||console.log(JSON.parse(a))}))}},{key:"sendJSON",value:function(e){var t='{"message": "Update JSON", "content": "'+e+'", "sha": "'+this.sha+'" }',a={url:"https://api.github.com/repos/LibertyGlobal/".concat(this.repoName,"/contents/").concat(this.props.env.toUpperCase(),".json"),method:"PUT",body:t,auth:{user:this.user,pass:this.token}},n=this;this.requester.addToQueue(a,(function(e,t,a){console.log(JSON.parse(a)),e||200!==t.statusCode||(n.sha=JSON.parse(a).content.sha)}))}},{key:"handleRevert",value:function(){this.drawItems(JSON.parse(localStorage.getItem("instant-widgets-storage-"+this.props.env+"-old")))}},{key:"handlePublish",value:function(){var t=this,a=JSON.parse(localStorage.getItem("instant-widgets-storage-"+this.props.env+"-new"));localStorage.setItem("instant-widgets-storage-"+this.props.env+"-old",JSON.stringify(a));var n=a.map((function(e){return e.iw_fullImg.startsWith("data:image")&&t.sendImage(e.imageUrl,e.iw_fullImg.split("data:image/png;base64,")[1]),Object.keys(e).forEach((function(t){t.startsWith("iw_")&&delete e[t]})),e.fromDate=Object(w.a)(new Date(e.fromDate).getTime()),e.tillDate=Object(w.a)(new Date(e.tillDate).getTime()),e}));this.sendJSON(e.from(O(n,null,2),"ascii").toString("base64"))}},{key:"addWidget",value:function(e){var t="instant-widgets-storage-"+this.props.env+"-new",a=JSON.parse(localStorage.getItem(t));e.iw_index=a.length,a.push(e),localStorage.setItem(t,JSON.stringify(a)),this.drawItems(a,!0)}},{key:"reorder",value:function(){var e=this,t=[];this.state.arrayOfItems.forEach((function(e){var a={};a.id=e.props.id,a.pos=document.getElementById("widget_".concat(a.id)).getBoundingClientRect().x,t.push(a)})),t.sort((function(e,t){return e.pos-t.pos}));var a=[];t.forEach((function(t,n){e.state.arrayOfItems.forEach((function(i){if(t.id===i.props.id){var r=i.props.data;r.iw_index=n,a.push(c.a.createElement(h.a,{key:b.a.generate(),data:r,env:e.props.env,id:r.iw_id}))}}))})),this.setState({arrayOfItems:a,isSortable:this.state.isSortable,isChanged:this.state.isChanged});var n="instant-widgets-storage-"+this.props.env+"-new",i=JSON.parse(localStorage.getItem(n)),r=[];t.forEach((function(e){i.forEach((function(t){e.id===t.iw_id&&r.push(t)}))})),localStorage.setItem(n,JSON.stringify(r))}},{key:"handleOrderToggle",value:function(){this.setState({arrayOfItems:this.state.arrayOfItems,isSortable:!this.state.isSortable,isChanged:this.state.isChanged})}},{key:"removeWidget",value:function(e){var t="instant-widgets-storage-"+this.props.env+"-new",a=JSON.parse(localStorage.getItem(t)).filter((function(t){return t.iw_id!==e}));localStorage.setItem(t,JSON.stringify(a)),this.drawItems(a,!0)}},{key:"render",value:function(){var e=c.a.createElement(g.a,null,c.a.createElement(p.a,{variant:"contained",className:"btn btn-success",onClick:this.handlePublish.bind(this)},Object(f.a)("carousel_main_controls_btn_publish")),c.a.createElement(p.a,{variant:"contained",className:"btn btn-alert",onClick:this.handleRevert.bind(this)},Object(f.a)("carousel_main_controls_btn_revert")));return c.a.createElement("div",{className:"carousel-container ".concat(this.state.isSortable?"sortable js-sortable":"")},c.a.createElement("div",{className:"carousel-main-controls-container"},c.a.createElement(d.a,{variant:"h5",component:"h2",gutterBottom:!0},"".concat(this.props.env.toUpperCase()," ").concat(Object(f.a)("carousel_heading"))),c.a.createElement(p.a,{variant:"contained",className:"btn btn-neutral ".concat(this.state.isSortable?"toggled":""),onClick:this.handleOrderToggle.bind(this)},Object(f.a)("carousel_main_controls_btn_reorder")),c.a.createElement(p.a,{variant:"contained",className:"btn btn-neutral",onClick:this.addWidget.bind(this,Object(y.a)())},Object(f.a)("carousel_main_controls_btn_add")),this.state.isChanged?e:""),c.a.createElement("div",{className:"carousel-items-container"},this.state.arrayOfItems))}}]),l}(l.Component);t.a=S}).call(this,a(13).Buffer)},182:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){var t=Number(e);return new Date(t).toISOString().split(".")[0]}},184:function(e,t,a){"use strict";a.d(t,"a",(function(){return W}));var n=a(181),i=a.n(n),r=a(272),o=a(265),s=a(35),l=a(0),c=a.n(l),u=a(573),m=(a(511),a(28)),d=a(139),p=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=t.split(".");return n.forEach((function(t){e&&(e=e[t])})),e||a},g=function e(t,a,n){return"string"==typeof a?e(t,a.split("."),n):1===a.length&&void 0!==n?t[a[0]]=n:0===a.length?t:e(t[a[0]],a.slice(1),n)},f=a(145),h=a(144),v=a(529),b=a(579),E=a(574),w=a(584),y=a(567),O=a(576),S=a(183),_=a(31),I=a(575),N=a(271),k=a(87),C=a.n(k),j=a(581),x=a(578),D=a(266),R=a.n(D),J=a(524),B=a(528),T=a(267),L=a.n(T);function U(e){return c.a.createElement(x.a,Object.assign({elevation:6,variant:"filled"},e))}var A={title:{color:"white"},description:{marginTop:"15px",marginBottom:"15px",color:"white"},button:{borderRadius:"20px",backgroundColor:"white",color:"black"},errorPrompt:{position:"absolute",top:0,left:0,zIndex:1301},audienceInputContainer:{minWidth:"160px"}},P=Object(u.a)({bottomSpacing:{marginBottom:"30px"}});function W(e){var t=P(e),a=e.data,n=c.a.useState(a),l=Object(s.a)(n,2),u=l[0],k=l[1],x=Object(d.a)()[0],D=function(e){var t=[],a=e.split(".")[0],n=p(u,e);return Object.keys(n).forEach((function(i){t.push(c.a.createElement(E.a,{container:!0,spacing:1,alignItems:"flex-end",key:a+"-key-"+i},c.a.createElement(E.a,{item:!0},i.toUpperCase()),c.a.createElement(E.a,{item:!0},c.a.createElement(b.a,{id:a+"-field-"+i,defaultValue:n[i],inputProps:{"data-path":e+"."+i}}))))})),t},T=function(e){13===e.keyCode&&e.ctrlKey&&we()},W=c.a.useState(!1),M=Object(s.a)(W,2),q=M[0],G=M[1],z=function(){G(!1),document.removeEventListener("keydown",T)},F=c.a.useState(!1),H=Object(s.a)(F,2),K=H[0],Q=H[1],V=function(){Q(!1)},Y=c.a.useState(u.audience),$=Object(s.a)(Y,2),X=$[0],Z=$[1],ee=c.a.useState(e.env.toUpperCase()),te=Object(s.a)(ee,2),ae=te[0],ne=te[1],ie=c.a.useState(new Date(u.fromDate)),re=Object(s.a)(ie,2),oe=re[0],se=re[1],le=c.a.useState(new Date(u.tillDate)),ce=Object(s.a)(le,2),ue=ce[0],me=ce[1],de=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))};function pe(){return(pe=Object(o.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=document.getElementById("image-input").files[0])){e.next=9;break}return a=Object.assign({},u),e.next=5,de(t);case 5:a.iw_fullImg=e.sent,a.imageUrl=C.a.generate()+".png",k(a),ge(a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ge=function(t){var a=JSON.parse(localStorage.getItem("instant-widgets-storage-"+e.env+"-new")).filter((function(e){return e.iw_id!==t.iw_id}));localStorage.setItem("instant-widgets-storage-"+e.env+"-new",JSON.stringify([t].concat(Object(r.a)(a))))},fe=c.a.useState(""),he=Object(s.a)(fe,2),ve=he[0],be=he[1],Ee=function(){be("")},we=function(){var e="",t=Array.from(document.querySelectorAll("input")).filter((function(e){return!e.value.trim().length&&"file"!==e.type})),a=function(){if(t.length?e="All fields must be filled.":i?r||(e="Allowed image dimensions: Minimum size: 750 x 784, Maximum size: 1500 x 1568."):e="Image should be in PNG format.",e)be(e);else{var a=Object.assign({},u);document.getElementById("image-input").classList.contains("js-image-removed")&&(a.imageUrl="",a.iw_fullImg=""),document.querySelectorAll("[data-path]").forEach((function(e){var t=e.getAttribute("data-path"),n=e.value;g(a,t,n)})),k(a),function(){pe.apply(this,arguments)}(),ge(a),z()}},n=document.getElementById("image-input"),i=!0,r=!0;if(n.value){i=n.value.endsWith(".png");var o=new Image;o.src=window.URL.createObjectURL(n.files[0]),o.onload=function(){(o.width<750||o.width>1500||o.height<784||o.height>1568)&&(r=!1),a()}}else a()};return c.a.createElement(R.a,{axis:"x",handle:".js-sortable .js-widget-item-container",defaultPosition:{x:0,y:0},position:{x:0,y:0},grid:[25,25],scale:1,onStop:function(){window.carousels.get(ae.toLowerCase()).reorder()}},c.a.createElement(B.a,{className:"widget-item-wrapper"},c.a.createElement(J.a,{elevation:3,style:{backgroundImage:"url('".concat(u.iw_fullImg?u.iw_fullImg:"","')")},className:"widget-item-container js-widget-item-container",id:"widget_"+e.id},c.a.createElement(h.a,{gutterBottom:!0,variant:"h5",component:"h2",style:A.title},u.title[x]),c.a.createElement(h.a,{gutterBottom:!0,variant:"body2",component:"p",style:A.description},u.description[x]),c.a.createElement(f.a,{size:"small",color:"primary",variant:"contained",target:"_blank",href:u.button.url,style:A.button},u.button.title[x]),c.a.createElement(f.a,{onClick:function(){Q(!0)},size:"small",color:"default",variant:"contained",className:"widget-item-controls-btn widget-item-copy-btn"},Object(m.a)("widget_controls_btn_copy")),c.a.createElement(f.a,{onClick:function(){G(!0),document.addEventListener("keydown",T)},size:"small",color:"default",variant:"contained",className:"widget-item-controls-btn widget-item-edit-btn"},Object(m.a)("widget_controls_btn_edit")),c.a.createElement(v.a,{open:q,onClose:z,className:"modal-handler"},c.a.createElement("div",{className:"modal-container"},c.a.createElement("form",{autoComplete:"off"},c.a.createElement(E.a,{container:!0,spacing:1,alignItems:"flex-end",justify:"space-around",className:"".concat(t.bottomSpacing)},c.a.createElement(E.a,{item:!0},c.a.createElement(h.a,{variant:"h5",component:"h2",className:"block-title"},"Title"),D("title")),c.a.createElement(E.a,{item:!0},c.a.createElement(h.a,{variant:"h5",component:"h2",className:"block-title"},"Description"),D("description"))),c.a.createElement(E.a,{container:!0,spacing:1,alignItems:"flex-end",justify:"space-around"},c.a.createElement(E.a,{item:!0},c.a.createElement(h.a,{variant:"h5",component:"h2",className:"block-title"},"Image"))),c.a.createElement(E.a,{container:!0,spacing:1,alignItems:"flex-end",justify:"space-around",className:"".concat(t.bottomSpacing)},c.a.createElement(E.a,{item:!0},c.a.createElement("input",{type:"file",id:"image-input",className:"input-file"})),c.a.createElement(E.a,{item:!0},c.a.createElement(f.a,{variant:"contained",color:"default",component:"span",onClick:function(){if(window.confirm("Are you sure to remove the image?")){var e=document.getElementById("image-input");e.value="",e.classList.add("js-image-removed")}}},"Remove image"))),c.a.createElement(E.a,{container:!0,spacing:1,alignItems:"flex-start",justify:"space-around",className:"".concat(t.bottomSpacing)},c.a.createElement(E.a,{item:!0},c.a.createElement(h.a,{variant:"h5",component:"h2"},"More Button"),c.a.createElement(b.a,{id:"btn-link-field",label:"Link for button",defaultValue:u.button.url,inputProps:{"data-path":"button.url"}})),c.a.createElement(E.a,{item:!0},D("button.title"))),c.a.createElement(E.a,{container:!0,spacing:1,alignItems:"flex-end",justify:"space-around",className:"".concat(t.bottomSpacing)},c.a.createElement(E.a,{item:!0},c.a.createElement(h.a,{variant:"h5",component:"h2",className:"block-title"},"Audience")),c.a.createElement(E.a,{item:!0},c.a.createElement(y.a,{style:A.audienceInputContainer},c.a.createElement(O.a,{id:"audience-select",value:X,onChange:function(e){Z(e.target.value)},inputProps:{"data-path":"audience"}},c.a.createElement(w.a,{value:"MOBILE"},"MOBILE"),c.a.createElement(w.a,{value:"BROADBAND"},"BROADBAND"),c.a.createElement(w.a,{value:"ALL"},"ALL"))))),c.a.createElement(E.a,{container:!0,spacing:1,alignItems:"flex-end",justify:"space-around"},c.a.createElement(E.a,{item:!0},c.a.createElement(h.a,{variant:"h5",component:"h2",className:"block-title"},"Availability"))),c.a.createElement(E.a,{container:!0,spacing:1,alignItems:"flex-end",justify:"space-around",className:"".concat(t.bottomSpacing)},c.a.createElement(E.a,{item:!0},c.a.createElement(_.a,{utils:S.a},c.a.createElement(I.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-from",label:"From (mm/dd/yyyy)",value:oe,onChange:function(e){se(e)},KeyboardButtonProps:{"aria-label":"change date"},inputProps:{"data-path":"fromDate"}}))),c.a.createElement(E.a,{item:!0},c.a.createElement(_.a,{utils:S.a},c.a.createElement(I.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-till",label:"Till (mm/dd/yyyy)",value:ue,onChange:function(e){me(e)},KeyboardButtonProps:{"aria-label":"change date"},inputProps:{"data-path":"tillDate"}})))),c.a.createElement(E.a,{container:!0,spacing:1,alignItems:"flex-end",justify:"space-around"},c.a.createElement(E.a,{item:!0},c.a.createElement(f.a,{variant:"contained",color:"secondary",component:"span",onClick:function(){window.confirm("Are you sure to delete this Widget?")&&(window.carousels.get(ae.toLowerCase()).removeWidget(u.iw_id),z())},startIcon:c.a.createElement(L.a,null)},"Remove Widget")),c.a.createElement(E.a,{item:!0},c.a.createElement(f.a,{variant:"contained",color:"default",component:"span",onClick:z},"Cancel"),c.a.createElement(f.a,{variant:"contained",color:"primary",component:"span",onClick:we,className:"save-btn"},"Save")))),c.a.createElement(j.a,{open:!!ve.length,autoHideDuration:3e3,onClose:Ee},c.a.createElement(U,{onClose:Ee,severity:"error"},ve)))),c.a.createElement(v.a,{open:K,onClose:V,className:"modal-handler"},c.a.createElement("div",{className:"modal-container"},c.a.createElement("form",{autoComplete:"off"},c.a.createElement(h.a,{variant:"h5",component:"h2",className:"block-title"},"Select target environment"),c.a.createElement(y.a,{className:"copy-env-dropdown"},c.a.createElement(O.a,{id:"target-env-select",value:ae,onChange:function(e){ne(e.target.value)}},c.a.createElement(w.a,{value:"JIT"},"JIT"),c.a.createElement(w.a,{value:"UAT"},"UAT"),c.a.createElement(w.a,{value:"PROD"},"PROD"))),c.a.createElement(E.a,{container:!0,spacing:1,alignItems:"flex-end",className:"copy-btns-container"},c.a.createElement(E.a,{item:!0},c.a.createElement(f.a,{variant:"contained",color:"default",component:"span",onClick:V},"Cancel")),c.a.createElement(E.a,{item:!0},c.a.createElement(f.a,{variant:"contained",color:"primary",component:"span",onClick:function(){window.carousels.get(ae.toLowerCase()).addWidget(u),V()}},"COPY WIDGET"))))))),c.a.createElement(B.a,{className:"widget-item-bottom-block"},c.a.createElement(h.a,{variant:"body2",color:"textSecondary",component:"p"},u.audience),c.a.createElement(h.a,{variant:"body2",color:"textSecondary",component:"p"},Object(N.a)(new Date(u.fromDate),"dd/MM/yyyy")+" - "+Object(N.a)(new Date(u.tillDate),"dd/MM/yyyy")))))}},268:function(e,t,a){"use strict";var n=a(131),i=a(132),r=a(60),o=a.n(r),s=function(){function e(t){Object(n.a)(this,e),this.queue=[],this.interval=2e3,this.timer="",this.tagData=t}return Object(i.a)(e,[{key:"sendTag",value:function(){var e='{"tag_name": "'+this.tagData.env+"-"+(new Date).getTime()+'"}',t={url:"https://api.github.com/repos/LibertyGlobal/".concat(this.tagData.repoName,"/releases"),method:"POST",body:e,auth:{user:this.tagData.user,pass:this.tagData.token}};o()(t,(function(e,t,a){e||200!==t.statusCode?console.error(e):console.log(a)}))}},{key:"sendRequest",value:function(){if(this.queue.length){var e=this.queue.shift(),t=e.opt,a=e.clb;o()(t,a)}else this.sendTag(),clearInterval(this.timer)}},{key:"start",value:function(){if(!this.timer){var e=this;this.timer=setInterval((function(){e.sendRequest()}),this.interval)}}},{key:"addToQueue",value:function(e,t){var a={opt:e,clb:t};this.queue.push(a),this.start()}}]),e}();t.a=s},269:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(139),i={title:{},description:{},fromDate:"2020-01-01T00:00:00",tillDate:"2021-01-01T00:00:00",audience:"ALL",imageUrl:"",button:{url:"https://www.libertyglobal.com/",title:{}}},r=function(){return Object(n.a)().forEach((function(e){i.title[e]="Title text (".concat(e,")"),i.description[e]="Description text (".concat(e,")"),i.button.title[e]="Button text (".concat(e,")")})),i}},28:function(e,t,a){"use strict";var n={EN:{login_heading:"Login with your GitHub credentials",login_user_name:"User Name",login_token:"Personal Access Token",login_instructions_link:"Read Me",repos_heading:"Pick Repository",repos_btn:"Start Editing",carousel_heading:"widgets",carousel_main_controls_btn_reorder:"Change order",carousel_main_controls_btn_add:"Add widget",carousel_main_controls_btn_publish:"Publish",carousel_main_controls_btn_revert:"Revert all changes",widget_controls_btn_copy:"Copy",widget_controls_btn_edit:"Edit"}};t.a=function(e){return n.EN[e]}},291:function(e,t,a){e.exports=a(523)},296:function(e,t,a){},297:function(e,t,a){},298:function(e,t,a){},313:function(e,t){},315:function(e,t){},345:function(e,t){},346:function(e,t){},390:function(e,t){},392:function(e,t){},415:function(e,t){},509:function(e,t,a){},511:function(e,t,a){},523:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(16),o=a.n(r),s=(a(296),a(297),a(35)),l=(a(298),a(60)),c=a.n(l),u=a(145),m=a(579),d=a(580),p=a(569),g=a(564),f=a(563),h=a(570),v=a(28),b=function(e){return i.a.createElement("div",null,i.a.createElement(d.a,{open:!0,"aria-labelledby":"form-dialog-title"},i.a.createElement(f.a,{id:"form-dialog-title"},Object(v.a)("login_heading")),i.a.createElement(g.a,null,i.a.createElement(m.a,{autoFocus:!0,margin:"dense",id:"name",label:Object(v.a)("login_user_name"),type:"text",fullWidth:!0}),i.a.createElement(m.a,{margin:"dense",id:"pass",label:Object(v.a)("login_token"),type:"password",fullWidth:!0}),i.a.createElement(p.a,null,i.a.createElement(u.a,{onClick:function(){var t={url:"https://api.github.com/user/repos?per_page=1000",auth:{user:document.getElementById("name").value,pass:document.getElementById("pass").value}};c()(t,(function(t,a,n){if(t||200!==a.statusCode)console.error("ERROR");else{var i=JSON.parse(n).filter((function(e){return e.name.startsWith("capp-instantWidgets-")}));localStorage.setItem("instant-widgets-repos",JSON.stringify(i)),localStorage.setItem("instant-widgets-creds",document.getElementById("name").value+":"+document.getElementById("pass").value),e.setScreen("repos"),window.location="/?page=repos"}}))},color:"primary"},"Login")),i.a.createElement(h.a,{href:"https://google.com"},Object(v.a)("login_instructions_link")))))},E=a(577),w=a(582),y=a(571),O=a(567);function S(e){var t=JSON.parse(localStorage.getItem("instant-widgets-repos")),a=i.a.useState(t[0].name),n=Object(s.a)(a,2),r=n[0],o=n[1],l=function(e){var t=e.arrOfRepos;return i.a.createElement("div",null,t.map((function(e){return i.a.createElement("div",{key:e.id},i.a.createElement(y.a,{value:e.name,control:i.a.createElement(E.a,null),label:e.name}))})))};return i.a.createElement("div",null,i.a.createElement(d.a,{open:!0,"aria-labelledby":"form-repos-dialog-title"},i.a.createElement(f.a,{id:"form-repos-dialog-title"},Object(v.a)("repos_heading")),i.a.createElement(g.a,null,i.a.createElement(O.a,{component:"fieldset"},i.a.createElement(w.a,{"aria-label":"repos",name:"repos1",value:r,onChange:function(e){o(e.target.value)}},i.a.createElement(l,{arrOfRepos:t}))),i.a.createElement(p.a,null,i.a.createElement(u.a,{onClick:function(a){var n=t.filter((function(e){return e.name===r}));localStorage.setItem("instant-widgets-current-repo",JSON.stringify(n)),e.setScreen("widgets"),window.location="/?page=widgets"},color:"primary"},Object(v.a)("repos_btn"))))))}var _=a(143);function I(){return i.a.createElement("div",null,i.a.createElement(_.a,{env:"PROD"}),i.a.createElement(_.a,{env:"UAT"}),i.a.createElement(_.a,{env:"JIT"}))}var N=function(){var e,t=String(new URLSearchParams(window.location.search).get("page")),a=i.a.useState(t),n=Object(s.a)(a,2),r=n[0],o=n[1];return i.a.createElement("div",{className:"UI"},"repos"===(e=r)?i.a.createElement(S,{setScreen:function(e){return o(e)}}):"widgets"===e?i.a.createElement(I,null):i.a.createElement(b,{setScreen:function(e){return o(e)}}))};var k=function(){return i.a.createElement("div",{className:"App-Container"},i.a.createElement(N,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[291,1,2]]]);
//# sourceMappingURL=main.971468af.chunk.js.map