(this["webpackJsonpinstant-widgets-editor"]=this["webpackJsonpinstant-widgets-editor"]||[]).push([[0],{147:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(29),r={AT:["de"],BY:["be","ru"],CH:["de","en","fr","it"],GB:["en"],IE:["en"],NL:["nl"],PL:["pl"]},i=function(){return r[Object(n.a)().toUpperCase()]}},151:function(e,t,a){"use strict";(function(e){var n=a(139),r=a(140),i=a(141),o=a(276),s=a(279),c=a(0),l=a.n(c),u=(a(519),a(53)),m=a.n(u),d=a(116),p=a(95),g=a(282),f=a(542),h=a(28),b=a(188),v=a(77),E=a.n(v),w=a(275),y=a(189),O=a(280),S=a(29),_=a(94),j=a(71),N=a(534),k=a(535),C=function(t){Object(s.a)(c,t);var a=Object(o.a)(c);function c(e){var t;return Object(n.a)(this,c),(t=a.call(this,e)).state={arrayOfItems:[],isSortable:!1,isChanged:!1},t.user=e.creds.login,t.token=e.creds.personalAccessToken,t.repoName=e.currentRepo,t.sha="",t.requester=new w.a({env:e.env,user:t.user,token:t.token,repoName:t.repoName}),window.carousels||(window.carousels=new Map),window.carousels.set(e.env.toLowerCase(),Object(i.a)(t)),t}return Object(r.a)(c,[{key:"componentDidMount",value:function(){var e=this;console.log(this.user);var t=this,a={url:"https://api.github.com/repos/LibertyGlobal/".concat(this.repoName,"/contents/").concat(this.props.env.toUpperCase(),".json"),auth:{user:this.user,pass:this.token}};m()(a,(function(e,a,r){if(e||200!==a.statusCode)console.error("ERROR");else{var i=JSON.parse(r),o=i.download_url;t.sha=i.sha,n(o)}}));var n=function(e){var a={url:e};m()(a,(function(e,a,n){if(e||200!==a.statusCode)console.error("ERROR");else{var r=JSON.parse(n);t.drawItems(r)}}))};window.setInterval((function(){var a=localStorage.getItem("instant-widgets-storage-"+Object(S.a)()+"-"+t.props.env+"-old")!==localStorage.getItem("instant-widgets-storage-"+Object(S.a)()+"-"+t.props.env+"-new");e.setState({arrayOfItems:e.state.arrayOfItems,isSortable:e.state.isSortable,isChanged:a})}),1e3)}},{key:"drawItems",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=[],i=this,o=function(){localStorage.setItem("instant-widgets-storage-"+Object(S.a)()+"-"+i.props.env+"-new",JSON.stringify(r)),a||localStorage.setItem("instant-widgets-storage-"+Object(S.a)()+"-"+i.props.env+"-old",JSON.stringify(r)),r.forEach((function(e){n.push(l.a.createElement(b.a,{key:E.a.generate(),data:e,env:i.props.env,id:e.iw_id}))})),i.setState({arrayOfItems:n,isSortable:i.state.isSortable,isChanged:i.state.isChanged})},s=function(t){r.push(t),r.length===e.length&&(r=r.sort((function(e,t){return Number(e.iw_index)>Number(t.iw_index)?1:Number(t.iw_index)>Number(e.iw_index)?-1:0})),o())};e.length||o(),e.forEach((function(e,a){if(e.iw_id=e.iw_id?e.iw_id:E.a.generate(),void 0===e.iw_index&&(e.iw_index=a),e.imageUrl&&!j.a.get(e.imageUrl)){var n={url:"https://api.github.com/repos/LibertyGlobal/".concat(t.repoName,"/contents/images/").concat(t.props.env.toUpperCase(),"/").concat(e.imageUrl),auth:{user:t.user,pass:t.token}};m()(n,(function(t,a,n){if(t||200!==a.statusCode)console.error("Error: ",t),s(e);else{var r=JSON.parse(n).download_url;k(r,(function(t,a){j.a.set(e.imageUrl,a.dataUri),s(e)}))}}))}else s(e)}))}},{key:"sendImage",value:function(e){var t=this,a='{"message": "Upload image", "content": "'+j.a.get(e).split("data:image/png;base64,")[1]+'", "sha": "'+this.sha+'" }',n={url:"https://api.github.com/repos/LibertyGlobal/".concat(this.repoName,"/contents/images/").concat(this.props.env.toUpperCase(),"/").concat(e),method:"PUT",body:a,auth:{user:this.user,pass:this.token}};this.requester.addToQueue(n,(function(e,a,n){console.log(JSON.parse(n)),e?(console.error(e),t.props.notify(e,"error")):t.props.notify("Image was sent to Github","success")}))}},{key:"sendJSON",value:function(e){var t=this,a='{"message": "Update JSON", "content": "'+e+'", "sha": "'+this.sha+'" }',n={url:"https://api.github.com/repos/LibertyGlobal/".concat(this.repoName,"/contents/").concat(this.props.env.toUpperCase(),".json"),method:"PUT",body:a,auth:{user:this.user,pass:this.token}};this.requester.addToQueue(n,(function(e,a,n){e||200!==a.statusCode?(console.error(e),t.props.notify(e,"error")):(t.sha=JSON.parse(n).content.sha,t.props.notify("JSON was sent to Github","success"))}))}},{key:"handleRevert",value:function(){var e=this;Object(_.a)("Are you sure to revert all changes for ".concat(this.props.env,"?"),(function(){e.drawItems(JSON.parse(localStorage.getItem("instant-widgets-storage-"+Object(S.a)()+"-"+e.props.env+"-old")))}))}},{key:"handlePublish",value:function(){var t=this;Object(_.a)("Are you sure to publish at ".concat(this.props.env,"?"),(function(){var a=JSON.parse(localStorage.getItem("instant-widgets-storage-"+Object(S.a)()+"-"+t.props.env+"-new"));localStorage.setItem("instant-widgets-storage-"+Object(S.a)()+"-"+t.props.env+"-old",JSON.stringify(a));var n=a.map((function(e){return j.a.get(e.imageUrl)&&t.sendImage(e.imageUrl),Object.keys(e).forEach((function(t){t.startsWith("iw_")&&delete e[t]})),e.fromDate=Object(y.a)(new Date(e.fromDate).getTime()),e.tillDate=Object(y.a)(new Date(e.tillDate).getTime()),e}));t.sendJSON(e.from(N(n,null,2),"ascii").toString("base64"))}))}},{key:"addWidget",value:function(e){var t="instant-widgets-storage-"+Object(S.a)()+"-"+this.props.env+"-new",a=JSON.parse(localStorage.getItem(t));e.iw_id=E.a.generate(),e.iw_index=a.length,a.push(e),localStorage.setItem(t,JSON.stringify(a)),this.drawItems(a,!0)}},{key:"reorder",value:function(){var e=this,t=[];this.state.arrayOfItems.forEach((function(e){var a={};a.id=e.props.id,a.pos=document.getElementById("widget_".concat(a.id)).getBoundingClientRect().x,t.push(a)})),t.sort((function(e,t){return e.pos-t.pos}));var a=[];t.forEach((function(t,n){e.state.arrayOfItems.forEach((function(r){if(t.id===r.props.id){var i=r.props.data;i.iw_index=n,a.push(l.a.createElement(b.a,{key:E.a.generate(),data:i,env:e.props.env,id:i.iw_id}))}}))})),this.setState({arrayOfItems:a,isSortable:this.state.isSortable,isChanged:this.state.isChanged});var n="instant-widgets-storage-"+Object(S.a)()+"-"+this.props.env+"-new",r=JSON.parse(localStorage.getItem(n)),i=[];t.forEach((function(e){r.forEach((function(t){e.id===t.iw_id&&i.push(t)}))})),localStorage.setItem(n,JSON.stringify(i))}},{key:"handleOrderToggle",value:function(){this.setState({arrayOfItems:this.state.arrayOfItems,isSortable:!this.state.isSortable,isChanged:this.state.isChanged})}},{key:"removeWidget",value:function(e){var t="instant-widgets-storage-"+Object(S.a)()+"-"+this.props.env+"-new",a=JSON.parse(localStorage.getItem(t)).filter((function(t){return t.iw_id!==e}));localStorage.setItem(t,JSON.stringify(a)),this.drawItems(a,!0)}},{key:"rerender",value:function(){var e="instant-widgets-storage-"+Object(S.a)()+"-"+this.props.env+"-new",t=JSON.parse(localStorage.getItem(e));this.drawItems(t,!0)}},{key:"render",value:function(){var e=l.a.createElement(g.a,null,l.a.createElement(p.a,{variant:"contained",className:"btn btn-success",onClick:this.handlePublish.bind(this)},Object(h.a)("carousel_main_controls_btn_publish")),l.a.createElement(p.a,{variant:"contained",className:"btn btn-alert",onClick:this.handleRevert.bind(this)},Object(h.a)("carousel_main_controls_btn_revert")));return l.a.createElement("div",{className:"carousel-container ".concat(this.state.isSortable?"sortable js-sortable":"")},l.a.createElement(f.a,{className:"carousel-main-controls-container",container:!0,direction:"row",alignItems:"center"},l.a.createElement(d.a,{variant:"h5",component:"h2"},"".concat(this.props.env.toUpperCase()," ").concat(Object(h.a)("carousel_heading"))),l.a.createElement(p.a,{variant:"contained",className:"btn btn-neutral ".concat(this.state.isSortable?"toggled":""),onClick:this.handleOrderToggle.bind(this)},Object(h.a)("carousel_main_controls_btn_reorder")),l.a.createElement(p.a,{variant:"contained",className:"btn btn-neutral",onClick:this.addWidget.bind(this,Object(O.a)())},Object(h.a)("carousel_main_controls_btn_add")),this.state.isChanged?e:""),l.a.createElement("div",{className:"carousel-items-container"},this.state.arrayOfItems))}}]),c}(c.Component);t.a=C}).call(this,a(13).Buffer)},188:function(e,t,a){"use strict";a.d(t,"a",(function(){return z}));var n=a(185),r=a.n(n),i=a(278),o=a(271),s=a(34),c=a(0),l=a.n(c),u=a(587),m=(a(521),a(28)),d=a(147),p=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=t.split(".");return n.forEach((function(t){e&&(e=e[t])})),e||a},g=function e(t,a,n){return"string"==typeof a?e(t,a.split("."),n):1===a.length&&void 0!==n?t[a[0]]=n:0===a.length?t:e(t[a[0]],a.slice(1),n)},f=a(95),h=a(116),b=a(546),v=a(594),E=a(542),w=a(600),y=a(582),O=a(591),S=a(186),_=a(33),j=a(590),N=a(588),k=a(277),C=a(77),I=a.n(C),D=a(597),R=a(593),x=a(272),T=a.n(x),U=a(281),A=a(282),B=a(274),L=a.n(B),J=a(29),W=a(94),P=a(71);function M(e){return l.a.createElement(R.a,Object.assign({elevation:6,variant:"filled"},e))}var q={title:{color:"white"},description:{marginTop:"15px",marginBottom:"15px",color:"white"},button:{borderRadius:"20px",backgroundColor:"white",color:"black"},errorPrompt:{position:"absolute",top:0,left:0,zIndex:1301},audienceInputContainer:{width:"100%",minWidth:"160px"},blockWithTopSpacing:{marginTop:"40px"},minWidth50:{minWidth:"50%"},width100:{width:"100%"}},G=Object(u.a)({topSpacing:{marginTop:"30px"},bottomSpacing:{marginBottom:"30px"}});function z(e){var t=G(e),a=e.data,n=l.a.useState(a),c=Object(s.a)(n,2),u=c[0],C=c[1],R=Object(d.a)()[0],x=Object(N.a)(new Date,{start:new Date(u.fromDate),end:new Date(u.tillDate)}),B=function(e){var t=[],a=e.split(".")[0],n=p(u,e),r=e.includes("description"),i=r?120:22;return Object.keys(n).forEach((function(o){t.push(l.a.createElement(E.a,{container:!0,spacing:1,alignItems:"center",key:a+"-key-"+o},l.a.createElement(E.a,{item:!0,style:q.width100},l.a.createElement(v.a,{id:a+"-field-"+o,defaultValue:n[o],label:o.toUpperCase(),style:q.width100,multiline:r,inputProps:{"data-path":e+"."+o,maxLength:i}}))))})),t},z=l.a.useState(!!u.iw_isNew),F=Object(s.a)(z,2),K=F[0],Q=F[1],Y=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];u.iw_isNew&&t&&(u.iw_isNew=!1,Ne(!1)),Q(!1),e&&window.carousels.get(oe.toLowerCase()).rerender()},H=l.a.useState(!1),V=Object(s.a)(H,2),$=V[0],X=V[1],Z=function(){X(!1)},ee=l.a.useState(u.audience),te=Object(s.a)(ee,2),ae=te[0],ne=te[1],re=l.a.useState(e.env.toUpperCase()),ie=Object(s.a)(re,2),oe=ie[0],se=ie[1],ce=l.a.useState(new Date(u.fromDate)),le=Object(s.a)(ce,2),ue=le[0],me=le[1],de=l.a.useState(new Date(u.tillDate)),pe=Object(s.a)(de,2),ge=pe[0],fe=pe[1],he=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))};function be(){return ve.apply(this,arguments)}function ve(){return(ve=Object(o.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=document.getElementById("image-input").files[0])){e.next=13;break}return(a=Object.assign({},u)).imageUrl=I.a.generate()+".png",e.t0=P.a,e.t1=a.imageUrl,e.next=8,he(t);case 8:e.t2=e.sent,e.t0.set.call(e.t0,e.t1,e.t2),C(a),Ee(a),window.carousels.get(oe.toLowerCase()).rerender();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ee=function(t){var a=JSON.parse(localStorage.getItem("instant-widgets-storage-"+Object(J.a)()+"-"+e.env+"-new")).filter((function(e){return e.iw_id!==t.iw_id}));localStorage.setItem("instant-widgets-storage-"+Object(J.a)()+"-"+e.env+"-new",JSON.stringify([t].concat(Object(i.a)(a))))},we=l.a.useState(""),ye=Object(s.a)(we,2),Oe=ye[0],Se=ye[1],_e=function(e){Se(e)},je=function(){Se("")},Ne=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=function(){window.carousels.get(oe.toLowerCase()).removeWidget(u.iw_id),Y()};e?Object(W.a)("Are you sure to delete this Widget?",t):t()};return l.a.createElement(T.a,{axis:"x",handle:".js-sortable .js-widget-item-container",defaultPosition:{x:0,y:0},position:{x:0,y:0},grid:[25,25],scale:1,onStop:function(){window.carousels.get(oe.toLowerCase()).reorder()}},l.a.createElement(A.a,{className:"widget-item-wrapper ".concat(x?"active-by-date":"")},l.a.createElement(U.a,{elevation:3,style:{backgroundImage:"url('".concat(P.a.get(u.imageUrl),"')")},className:"widget-item-container js-widget-item-container",id:"widget_"+e.id},l.a.createElement(h.a,{gutterBottom:!0,variant:"h5",component:"h2",style:q.title},u.title[R]),l.a.createElement(h.a,{gutterBottom:!0,variant:"body2",component:"p",style:q.description},u.description[R]),l.a.createElement(f.a,{size:"small",color:"primary",variant:"contained",target:"_blank",href:u.button.url,style:q.button},u.button.title[R]),l.a.createElement(f.a,{onClick:function(){X(!0)},size:"small",color:"default",variant:"contained",className:"widget-item-controls-btn widget-item-copy-btn"},Object(m.a)("widget_controls_btn_copy")),l.a.createElement(f.a,{onClick:function(){Q(!0)},size:"small",color:"default",variant:"contained",className:"widget-item-controls-btn widget-item-edit-btn"},Object(m.a)("widget_controls_btn_edit")),l.a.createElement(b.a,{open:K,onClose:Y,className:"modal-handler"},l.a.createElement("div",{className:"modal-container"},l.a.createElement("form",{autoComplete:"off"},l.a.createElement(E.a,{container:!0,spacing:1,direction:"column",alignItems:"center",justify:"space-around",className:"".concat(t.bottomSpacing," ").concat(t.topSpacing)},l.a.createElement(E.a,{item:!0,style:q.minWidth50,className:"".concat(t.bottomSpacing)},l.a.createElement(h.a,{variant:"h5",component:"h2",className:"block-title"},"Title"),B("title")),l.a.createElement(E.a,{item:!0,style:q.minWidth50,className:"".concat(t.bottomSpacing)},l.a.createElement(h.a,{variant:"h5",component:"h2",className:"block-title"},"Description"),B("description")),l.a.createElement(E.a,{item:!0},l.a.createElement(h.a,{variant:"h5",component:"h2",className:"block-title"},"Image")),l.a.createElement(E.a,{container:!0,spacing:1,alignItems:"center",justify:"space-around",style:q.blockWithTopSpacing},l.a.createElement(E.a,{item:!0},l.a.createElement("input",{type:"file",id:"image-input",className:"input-file"})),l.a.createElement(E.a,{item:!0},l.a.createElement(f.a,{variant:"contained",color:"default",component:"span",onClick:function(){Object(W.a)("Are you sure to remove the image?",(function(){var e=document.getElementById("image-input");e.value="",e.classList.add("js-image-removed")}))}},"Remove image"))),l.a.createElement(E.a,{item:!0,className:"".concat(t.bottomSpacing," ").concat(t.topSpacing)},l.a.createElement(h.a,{variant:"h5",component:"h2",className:"block-title"},"More Button")),l.a.createElement(E.a,{item:!0,style:q.minWidth50},l.a.createElement(v.a,{id:"btn-link-field",label:"Link for button",defaultValue:u.iw_isNew?"":u.button.url,style:q.width100,inputProps:{"data-path":"button.url"}}),B("button.title")),l.a.createElement(E.a,{item:!0,className:"".concat(t.bottomSpacing," ").concat(t.topSpacing)},l.a.createElement(h.a,{variant:"h5",component:"h2",className:"block-title"},"Audience")),l.a.createElement(E.a,{item:!0,style:q.minWidth50},l.a.createElement(y.a,{style:q.audienceInputContainer},l.a.createElement(O.a,{id:"audience-select",value:ae,onChange:function(e){ne(e.target.value)},inputProps:{"data-path":"audience"}},l.a.createElement(w.a,{value:"MOBILE"},"MOBILE"),l.a.createElement(w.a,{value:"BROADBAND"},"BROADBAND"),l.a.createElement(w.a,{value:"ALL"},"ALL")))),l.a.createElement(E.a,{item:!0,className:"".concat(t.bottomSpacing," ").concat(t.topSpacing)},l.a.createElement(h.a,{variant:"h5",component:"h2",className:"block-title"},"Availability")),l.a.createElement(E.a,{container:!0,spacing:1,alignItems:"flex-end",justify:"space-around",className:"".concat(t.bottomSpacing)},l.a.createElement(E.a,{item:!0},l.a.createElement(_.a,{utils:S.a},l.a.createElement(j.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-from",label:"From (mm/dd/yyyy)",value:ue,onChange:function(e){me(e)},KeyboardButtonProps:{"aria-label":"change date"},inputProps:{"data-path":"fromDate"}}))),l.a.createElement(E.a,{item:!0},l.a.createElement(_.a,{utils:S.a},l.a.createElement(j.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-till",label:"Till (mm/dd/yyyy)",value:ge,onChange:function(e){fe(e)},KeyboardButtonProps:{"aria-label":"change date"},inputProps:{"data-path":"tillDate"}}))))),l.a.createElement(E.a,{container:!0,spacing:1,alignItems:"flex-end",justify:"space-around"},u.iw_isNew?"":l.a.createElement(E.a,{item:!0},l.a.createElement(f.a,{variant:"contained",color:"secondary",component:"span",onClick:Ne,startIcon:l.a.createElement(L.a,null)},"Remove Widget")),l.a.createElement(E.a,{item:!0},l.a.createElement(f.a,{variant:"contained",color:"default",component:"span",onClick:Y},"Cancel"),l.a.createElement(f.a,{variant:"contained",color:"primary",component:"span",onClick:function(){var e="",t=Array.from(document.querySelectorAll("input")).filter((function(e){return!e.value.trim().length&&"file"!==e.type})),a=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t.length?e="All fields must be filled.":r?i||(e="Allowed image dimensions: Minimum size: 750 x 784, Maximum size: 1500 x 1568."):e="Image should be in PNG format.",e)_e(e);else{var n=Object.assign({},u);document.getElementById("image-input").classList.contains("js-image-removed")&&(n.imageUrl=""),document.querySelectorAll("[data-path]").forEach((function(e){var t=e.getAttribute("data-path"),a=e.value;g(n,t,a)})),n.iw_isNew=!1,C(n),be(),Ee(n),Y(!a,!1)}},n=document.getElementById("image-input"),r=!0,i=!0;if(n.value){r=n.value.endsWith(".png");var o=new Image;o.src=window.URL.createObjectURL(n.files[0]),o.onload=function(){(o.width<750||o.width>1500||o.height<784||o.height>1568)&&(i=!1),a(!0)}}else a()},className:"save-btn"},"Save")))),l.a.createElement(D.a,{open:!!Oe.length,onClose:je,anchorOrigin:{vertical:"top",horizontal:"center"}},l.a.createElement(M,{onClose:je,severity:"error"},Oe)))),l.a.createElement(b.a,{open:$,onClose:Z,className:"modal-handler"},l.a.createElement("div",{className:"modal-container"},l.a.createElement("form",{autoComplete:"off"},l.a.createElement(h.a,{variant:"h5",component:"h2",className:"block-title"},"Select target environment"),l.a.createElement(y.a,{className:"copy-env-dropdown"},l.a.createElement(O.a,{id:"target-env-select",value:oe,onChange:function(e){se(e.target.value)}},l.a.createElement(w.a,{value:"JIT"},"JIT"),l.a.createElement(w.a,{value:"UAT"},"UAT"),l.a.createElement(w.a,{value:"PROD"},"PROD"))),l.a.createElement(E.a,{container:!0,spacing:1,alignItems:"flex-end",className:"copy-btns-container"},l.a.createElement(E.a,{item:!0},l.a.createElement(f.a,{variant:"contained",color:"default",component:"span",onClick:Z},"Cancel")),l.a.createElement(E.a,{item:!0},l.a.createElement(f.a,{variant:"contained",color:"primary",component:"span",onClick:function(){window.carousels.get(oe.toLowerCase()).addWidget(u),Z()}},"COPY WIDGET"))))))),l.a.createElement(A.a,{className:"widget-item-bottom-block"},l.a.createElement(h.a,{variant:"body2",color:"textSecondary",component:"p"},u.audience),l.a.createElement(h.a,{variant:"body2",color:"textSecondary",component:"p"},Object(k.a)(new Date(u.fromDate),"dd/MM/yyyy")+" - "+Object(k.a)(new Date(u.tillDate),"dd/MM/yyyy")))))}},189:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){var t=Number(e);return function(e){var t=new Date(e);return new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()))}(new Date(t)).toISOString().split(".")[0]}},275:function(e,t,a){"use strict";var n=a(139),r=a(140),i=a(53),o=a.n(i),s=function(){function e(t){Object(n.a)(this,e),this.queue=[],this.interval=2e3,this.timer="",this.tagData=t}return Object(r.a)(e,[{key:"sendTag",value:function(){var e='{"tag_name": "'+this.tagData.env+"-"+(new Date).getTime()+'"}',t={url:"https://api.github.com/repos/LibertyGlobal/".concat(this.tagData.repoName,"/releases"),method:"POST",body:e,auth:{user:this.tagData.user,pass:this.tagData.token}};o()(t,(function(e,t,a){e||200!==t.statusCode?console.error(e):console.log(a)}))}},{key:"sendRequest",value:function(){if(this.queue.length){var e=this.queue.shift(),t=e.opt,a=e.clb;o()(t,a)}else this.sendTag(),clearInterval(this.timer)}},{key:"start",value:function(){if(!this.timer){var e=this;this.timer=setInterval((function(){e.sendRequest()}),this.interval)}}},{key:"addToQueue",value:function(e,t){var a={opt:e,clb:t};this.queue.push(a),this.start()}}]),e}();t.a=s},28:function(e,t,a){"use strict";var n={EN:{login_heading:"Login with your GitHub credentials",login_user_name:"User Name",login_token:"Personal Access Token",login_instructions_link:"Read Me",repos_heading:"Pick Repository",repos_btn:"Start Editing",carousel_heading:"widgets",carousel_main_controls_btn_reorder:"Change order",carousel_main_controls_btn_add:"Add widget",carousel_main_controls_btn_publish:"Publish",carousel_main_controls_btn_revert:"Revert all changes",widget_controls_btn_copy:"Copy",widget_controls_btn_edit:"Edit"}};t.a=function(e){return n.EN[e]}},280:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n={title:{},description:{},fromDate:"2020-01-01T00:00:00",tillDate:"2021-01-01T00:00:00",audience:"ALL",imageUrl:"",button:{url:"",title:{}}},r=a(147),i=function(){return Object(r.a)().forEach((function(e){n.title[e]="",n.description[e]="",n.button.title[e]=""})),n.iw_isNew=!0,n}},29:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(){return localStorage.getItem("instant-widgets-current-repo").split("capp-instantWidgets-")[1].toLowerCase()}},301:function(e,t,a){e.exports=a(536)},306:function(e,t,a){},307:function(e,t,a){},308:function(e,t,a){},323:function(e,t){},325:function(e,t){},355:function(e,t){},356:function(e,t){},400:function(e,t){},402:function(e,t){},425:function(e,t){},519:function(e,t,a){},521:function(e,t,a){},531:function(e,t,a){},536:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(14),o=a.n(i),s=(a(306),a(307),a(34)),c=(a(308),a(53)),l=a.n(c),u=a(95),m=a(594),d=a(546),p=a(541),g=a(539),f=a(538),h=a(584),b=a(28),v=a(542),E={loginBtn:{marginTop:"20px",marginBottom:"25px"}},w=function(e){return r.a.createElement("div",null,r.a.createElement(d.a,{open:!0,"aria-labelledby":"form-dialog-title"},r.a.createElement(f.a,{id:"form-dialog-title"},Object(b.a)("login_heading")),r.a.createElement(g.a,null,r.a.createElement(m.a,{autoFocus:!0,margin:"dense",id:"name",label:Object(b.a)("login_user_name"),type:"text",fullWidth:!0,autofill:"true"}),r.a.createElement(m.a,{margin:"dense",id:"pass",label:Object(b.a)("login_token"),type:"password",fullWidth:!0,autofill:"true"}),r.a.createElement(p.a,null,r.a.createElement(v.a,{container:!0,direction:"column",justify:"space-around",alignItems:"center"},r.a.createElement(u.a,{onClick:function(){var t=document.getElementById("name").value,a=document.getElementById("pass").value,n={url:"https://api.github.com/user/repos?per_page=1000",auth:{user:t,pass:a}};l()(n,(function(n,r,i){if(n||200!==r.statusCode)console.error("ERROR"),e.notify("Incorrect credentials","error");else{var o=JSON.parse(i).filter((function(e){return e.name.startsWith("capp-instantWidgets-")})).map((function(e){return e.name}));e.setRepos(o),e.setCreds({login:t,personalAccessToken:a}),e.setScreen("repos")}}))},color:"primary",variant:"contained",style:E.loginBtn},"Login"),r.a.createElement(h.a,{target:"_blank",href:"https://github.com/instant-widgets-editor/instant-widgets-editor.github.io/blob/master/README.md#instant-widgets-editor"},Object(b.a)("login_instructions_link")))))))},y=a(592),O=a(595),S=a(585),_=a(582),j={submitBtn:{marginTop:"20px"}},N=function(e){var t=e.repos,a=r.a.useState(t[0]),n=Object(s.a)(a,2),i=n[0],o=n[1],c=function(e){var t=e.arrOfRepos;return r.a.createElement("div",null,t.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(S.a,{value:e,control:r.a.createElement(y.a,null),label:e}))})))};return r.a.createElement("div",null,r.a.createElement(d.a,{open:!0,"aria-labelledby":"form-repos-dialog-title"},r.a.createElement(v.a,{container:!0,direction:"column",justify:"space-around",alignItems:"center"},r.a.createElement(f.a,{id:"form-repos-dialog-title"},Object(b.a)("repos_heading"))),r.a.createElement(g.a,null,r.a.createElement(_.a,{component:"fieldset"},r.a.createElement(O.a,{"aria-label":"repos",name:"repos1",value:i,onChange:function(e){o(e.target.value)}},r.a.createElement(c,{arrOfRepos:t}))),r.a.createElement(p.a,null,r.a.createElement(v.a,{container:!0,direction:"column",justify:"space-around",alignItems:"center"},r.a.createElement(u.a,{onClick:function(t){var a=i;localStorage.setItem("instant-widgets-current-repo",a),e.setCurrentRepo(a),e.setScreen("widgets")},color:"primary",variant:"contained",style:j.submitBtn},Object(b.a)("repos_btn")))))))},k=a(151),C=function(e){var t={creds:e.creds,currentRepo:e.currentRepo,notify:e.notify};return r.a.createElement("div",null,r.a.createElement(k.a,Object.assign({env:"PROD"},t)),r.a.createElement(k.a,Object.assign({env:"UAT"},t)),r.a.createElement(k.a,Object.assign({env:"JIT"},t)))},I=a(187);function D(){var e,t=r.a.useState(""),a=Object(s.a)(t,2),n=a[0],i=a[1],o=r.a.useState({login:"",personalAccessToken:""}),c=Object(s.a)(o,2),l=c[0],u=c[1],m=r.a.useState([]),d=Object(s.a)(m,2),p=d[0],g=d[1],f=r.a.useState(""),h=Object(s.a)(f,2),b=h[0],v=h[1],E=Object(I.b)().enqueueSnackbar,y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";E(e,{variant:t})};return r.a.createElement(r.a.Fragment,null,"repos"===(e=n)?r.a.createElement(N,{setScreen:function(e){return i(e)},repos:p,setCurrentRepo:function(e){return v(e)}}):"widgets"===e?r.a.createElement(C,{creds:l,currentRepo:b,notify:y}):r.a.createElement(w,{setScreen:function(e){return i(e)},setCreds:function(e){return u(e)},setRepos:function(e){return g(e)},notify:y}))}var R=function(){return r.a.createElement("div",{className:"UI"},r.a.createElement(I.a,{maxSnack:3},r.a.createElement(D,null)))};var x=function(){return r.a.createElement("div",{className:"App-Container"},r.a.createElement(R,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},71:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={get:function(e){var t=sessionStorage.getItem(e)||"";return e?t:""},set:function(e,t){sessionStorage.setItem(e,t)}}},94:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(0),r=a.n(n),i=a(273),o=(a(530),a(531),a(282)),s=a(95),c=a(546),l=a(541),u=a(539),m=a(543),d=a(538),p=function(e,t){var a={customUI:function(a){var n=a.onClose;return r.a.createElement(o.a,{className:"confirmation-popup"},r.a.createElement(c.a,{open:!0,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(d.a,{id:"alert-dialog-title"},"Confirmation"),r.a.createElement(u.a,null,r.a.createElement(m.a,{id:"alert-dialog-description"},e)),r.a.createElement(l.a,null,r.a.createElement(s.a,{onClick:n,color:"primary"},"Cancel"),r.a.createElement(s.a,{onClick:function(){t(),n()},color:"primary",autoFocus:!0},"OK"))))},childrenElement:function(){return r.a.createElement("div",null)},closeOnEscape:!0,closeOnClickOutside:!0,willUnmount:function(){},afterClose:function(){},onClickOutside:function(){},onKeypressEscape:function(){}};Object(i.confirmAlert)(a)}}},[[301,1,2]]]);
//# sourceMappingURL=main.2262b37c.chunk.js.map